<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lí 3T SHOES</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <header class="header text-dark py-3">
        <header class="header bg-primary-subtle text-dark py-3">
            <div class="container d-flex justify-content-between align-items-center">
                <!-- Logo -->
                <a href="trangchu.html" class="d-flex align-items-center text-decoration-none">
                    <img src="imgs/logo.jpg" alt="Logo 3T Shoes" height="100" width="100" class="me-2 rounded-circle" title="Logo">
                </a>

                <!-- Thanh tìm kiếm -->
                <div class="d-flex flex-grow-1 mx-4">
                    <input type="search" class="form-control" placeholder="Tìm kiếm sản phẩm...">
                    <button class="btn btn-light ms-2"><i class="fas fa-search"></i></button>
                </div>

                <!-- Các biểu tượng -->
                <div class="d-flex align-items-center">
                    <a href="taikhoancuatoi.html" class="text-white mx-2" title="Tài khoản"><i class="fas fa-user fa-lg"></i></a>
                    <a href="tranggiohang.html" class="text-white mx-2" title="Giỏ hàng"><i class="fas fa-shopping-cart fa-lg"></i></a>
                    <a href="blog.html" class="text-white mx-2" title="Blog"><i class="fas fa-blog fa-lg"></i></a>
                </div>
            </div>
        </header>
        <div class="category-bar text-dark py-1">
            <div class="container">
                <ul class="category-list d-flex justify-content-center mb-2 mt-2">
                    <li class="px-3"><a href="trangchu.html" class="text-decoration-none">Trang chủ</a></li>
                    <li class="px-3"><a href="nike.html" class="text-decoration-none">Giày Nike</a></li>
                    <li class="px-3"><a href="sandal.html" class="text-decoration-none">Dép Sandal</a></li>
                    <li class="px-3"><a href="taobao.html" class="text-decoration-none">Giày Taobao</a></li>
                    <li class="px-3"><a href="lienhe.html" class="text-decoration-none">Liên hệ</a></li>
                </ul>
            </div>
        </div>
        <div class="container mt-5">
            <h1 class="mb-4">Trang quản trị</h1>

            <!-- Tabs điều hướng -->
            <ul class="nav nav-tabs" id="adminTabs" role="tablist">
                <li class="nav-item">
                    <button class="nav-link active" id="product-tab" data-bs-toggle="tab" data-bs-target="#product-management" type="button" role="tab">Quản lý sản phẩm</button>
                </li>
                <li class="nav-item">
                    <button class="nav-link" id="order-tab" data-bs-toggle="tab" data-bs-target="#order-management" type="button" role="tab">Quản lý đơn hàng</button>
                </li>
            </ul>

            <!-- Nội dung Tabs -->
            <div class="tab-content mt-4">
                <!-- Quản lý sản phẩm -->
                <div class="tab-pane fade show active" id="product-management" role="tabpanel">
                    <h2>Danh sách sản phẩm</h2>
                    <button class="btn btn-primary mb-3" onclick="showAddProductModal()">Thêm sản phẩm mới</button>
                    <table class="table table-bordered" id="productTable">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Tên sản phẩm</th>
                                <th>Giá</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dữ liệu sản phẩm sẽ được thêm bởi JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Quản lý đơn hàng -->
                <div class="tab-pane fade" id="order-management" role="tabpanel">
                    <h2>Danh sách đơn hàng</h2>
                    <table class="table table-bordered" id="orderTable">
                        <thead>
                            <tr>
                                <th>Mã đơn hàng</th>
                                <th>Khách hàng</th>
                                <th>Sản phẩm</th>
                                <th>Trạng thái</th>
                                <th>Hành động</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Dữ liệu đơn hàng sẽ được thêm bởi JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Modal thêm/sửa sản phẩm -->
        <div class="modal fade" id="productModal" tabindex="-1" aria-labelledby="productModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="productModalLabel">Thêm sản phẩm</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="productForm">
                            <div class="mb-3">
                                <label for="productName" class="form-label">Tên sản phẩm</label>
                                <input type="text" id="productName" class="form-control" required>
                            </div>
                            <div class="mb-3">
                                <label for="productPrice" class="form-label">Giá</label>
                                <input type="number" id="productPrice" class="form-control" required>
                            </div>
                            <input type="hidden" id="productId">
                            <button type="submit" class="btn btn-primary">Lưu</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <!-- Footer -->
        <footer class="bg-primary-subtle py-4 mt-5 footer">
            <div class="container">
                <div class="row">
                    <div class="col-md-4 footer-links mt-3">
                        <h5>Về chúng tôi</h5>
                        <ul>
                            <li><a href="gioithieu.html" class="text-decoration-none">Giới thiệu</a></li>
                            <li><a href="dieukhoan.html" class="text-decoration-none">Điều khoản sử dụng</a></li>
                            <li><a href="lienhe.html" class="text-decoration-none">Liên hệ</a></li>
                        </ul>
                    </div>
                    <div class="col-md-4 footer-links mt-3">
                        <h5>Khách hàng</h5>
                        <ul>
                            <li><a href="chinhsachbaomat.html" class="text-decoration-none">Chính sách bảo mật</a></li>
                            <li><a href="chinhsachdoitra.html" class="text-decoration-none">Chính sách đổi trả</a></li>
                        </ul>
                    </div>
                    <div class=" col-md-4 footer-links mt-3">
                        <h5>Đăng ký để nhận ưu đãi từ 3T SHOES!</h5>
                        <form class="d-flex justify-content-center">
                            <input type="text" class="form-control w-60 me-2" placeholder="*Nhập số điện thoại của bạn">
                            <button class="border border-none"><a href="taikhoancuatoi.html" class="btn btn-primary">Đăng ký</a></button>
                        </form>
                        <div class="mt-3">
                            <p>Kết nối với chúng tôi:</p>
                            <div class="footer-social">
                                <a href="https://bom.so/iQgNYI"><img src="imgs/facebook.jpg" class="rounded-4" alt="Facebook" width="30"></a>
                                <a href="https://bom.so/79wB7E"><img src="imgs/tiktok.jpg" class="rounded-4" alt="Instagram" width="30"></a>
                                <a href="https://bom.so/uO1L9i"><img src="imgs/instagram.jpg" class="rounded-4" alt="TikTok" width="30"></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </footer>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
        <script>
            // Quản lý sản phẩm

            // Danh sách sản phẩm khởi tạo trống (Admin sẽ tự thêm sản phẩm)
            let products = [];
            let orders = []; // Mảng lưu danh sách đơn hàng

            // Hàm hiển thị danh sách sản phẩm lên bảng
            function displayProducts() {
                const productTableBody = document.querySelector('#productTable tbody'); // Lấy phần tử <tbody> của bảng sản phẩm
                productTableBody.innerHTML = ''; // Xóa nội dung cũ trong bảng

                // Duyệt qua danh sách sản phẩm và thêm từng sản phẩm vào bảng
                products.forEach(product => {
                    const row = productTableBody.insertRow(); // Thêm một dòng mới vào bảng
                    row.innerHTML = `
            <td>${product.id}</td> <!-- Hiển thị ID sản phẩm -->
            <td>${product.name}</td> <!-- Hiển thị tên sản phẩm -->
            <td>${product.price.toLocaleString()} đ</td> <!-- Hiển thị giá sản phẩm với định dạng có dấu phẩy -->
            <td>
                <!-- Nút sửa sản phẩm -->
                <button class="btn btn-warning" onclick="showEditProductModal(${product.id})">Sửa</button>
                <!-- Nút xóa sản phẩm -->
                <button class="btn btn-danger" onclick="deleteProduct(${product.id})">Xóa</button>
            </td>
        `;
                });
            }
            // Hiển thị danh sách đơn hàng
            function displayOrders() {
                const orderTableBody = document.querySelector('#orderTable tbody');
                orderTableBody.innerHTML = '';

                orders.forEach(order => {
                    const row = orderTableBody.insertRow();
                    row.innerHTML = `
            <td>${order.id}</td>
            <td>${order.productName}</td>
            <td>${order.quantity}</td>
            <td>${order.totalPrice.toLocaleString()} đ</td>
            <td>${order.status}</td>
            <td>
                <button class="btn btn-info" onclick="updateOrderStatus(${order.id}, 'Đang xử lý')">Đang xử lý</button>
                <button class="btn btn-success" onclick="updateOrderStatus(${order.id}, 'Hoàn tất')">Hoàn tất</button>
                <button class="btn btn-danger" onclick="updateOrderStatus(${order.id}, 'Đã hủy')">Hủy</button>
            </td>
        `;
                });
            }


            // Hiển thị modal thêm sản phẩm mới
            function showAddProductModal() {
                document.getElementById('productModalLabel').innerText = 'Thêm sản phẩm mới'; // Đặt tiêu đề cho modal
                document.getElementById('productForm').reset(); // Reset lại form về trạng thái rỗng
                document.getElementById('productId').value = ''; // Xóa giá trị ID ẩn (tránh nhầm lẫn)
                new bootstrap.Modal(document.getElementById('productModal')).show(); // Hiển thị modal
            }

            // Hiển thị modal sửa sản phẩm
            function showEditProductModal(id) {
                const product = products.find(p => p.id === id); // Tìm sản phẩm theo ID
                if (product) {
                    document.getElementById('productModalLabel').innerText = 'Chỉnh sửa sản phẩm'; // Đặt tiêu đề cho modal
                    document.getElementById('productId').value = product.id; // Gán giá trị ID vào input ẩn
                    document.getElementById('productName').value = product.name; // Gán tên sản phẩm vào input
                    document.getElementById('productPrice').value = product.price; // Gán giá sản phẩm vào input
                    new bootstrap.Modal(document.getElementById('productModal')).show(); // Hiển thị modal
                }
            }

            // Xử lý khi form thêm/sửa sản phẩm được gửi
            document.getElementById('productForm').addEventListener('submit', function(e) {
                e.preventDefault(); // Ngăn không cho form tải lại trang

                const id = parseInt(document.getElementById('productId').value); // Lấy ID sản phẩm (nếu có)
                const name = document.getElementById('productName').value; // Lấy tên sản phẩm
                const price = parseInt(document.getElementById('productPrice').value); // Lấy giá sản phẩm

                if (id) {
                    // Nếu ID tồn tại, cập nhật sản phẩm hiện tại
                    const productIndex = products.findIndex(p => p.id === id); // Tìm vị trí của sản phẩm trong mảng
                    if (productIndex !== -1) {
                        products[productIndex] = {
                            id,
                            name,
                            price
                        }; // Cập nhật thông tin sản phẩm
                    }
                } else {
                    // Nếu không có ID, thêm sản phẩm mới
                    const newId = products.length ? products[products.length - 1].id + 1 : 1; // Tạo ID mới tự động
                    products.push({
                        id: newId,
                        name,
                        price
                    }); // Thêm sản phẩm mới vào mảng
                }

                displayProducts(); // Cập nhật lại danh sách sản phẩm trên giao diện
                bootstrap.Modal.getInstance(document.getElementById('productModal')).hide(); // Ẩn modal
            });

            // Xóa sản phẩm theo ID
            function deleteProduct(id) {
                products = products.filter(product => product.id !== id); // Loại bỏ sản phẩm có ID tương ứng khỏi mảng
                displayProducts(); // Cập nhật lại danh sách sản phẩm trên giao diện
            }

            // Khi tài liệu được tải xong
            document.addEventListener('DOMContentLoaded', () => {
                displayProducts(); // Hiển thị danh sách sản phẩm (ban đầu trống)
            });
        </script>
</body>

</html>